# Лабораторная работа по теории графов

Проект для выполнения лабораторных работ по дисциплине "Теория графов". Реализован на Python с использованием объектно-ориентированного подхода.

## Структура проекта

```
graphs/
├── main.py                 # Основной файл для запуска заданий
├── utils/
│   ├── __init__.py
│   └── graph.py           # Класс Graph для работы с графами
├── tasks/
│   ├── __init__.py
│   └── task1.py           # Реализация задания 1
└── graph-tests/           # Тестовые данные
    ├── task1/
    ├── task2/
    └── ...
```

## Класс Graph

Универсальный класс для работы с графами и орграфами. Поддерживает три формата входных данных:

1. **Матрица смежности** - квадратная матрица с весами рёбер
2. **Списки смежности** - список смежных вершин для каждой вершины
3. **Список рёбер** - список рёбер в формате "из вершины в вершину"

### Основные методы

- `size()` - количество вершин
- `weight(vertex1, vertex2)` - вес ребра между вершинами
- `is_edge(vertex1, vertex2)` - проверка наличия ребра
- `adjacency_matrix()` - матрица смежности
- `adjacency_list(vertex)` - список смежных вершин
- `list_of_edges(vertex)` - список рёбер
- `is_directed()` - проверка направленности графа

## Запуск программы

### Основной синтаксис

```bash
py main.py <номер_задания> [номер_теста] [опции]
```

### Параметры

- `номер_задания` (обязательный) - номер задания от 1 до 20
- `номер_теста` (опциональный) - конкретный тест (например, 001) или все тесты
- `--algorithm {dfs,bfs}` - алгоритм для задания 1 (по умолчанию: dfs)
- `-i {m,a,e}` - тип входного файла:
  - `m` - матрица смежности (matrix)
  - `a` - списки смежности (adjacency_list)
  - `e` - список рёбер (list_of_edges)
- `-s, --show-result` - показать подробный результат и эталон

### Примеры использования

```bash
# Задание 1, все тесты
py main.py 1

# Задание 1, тест 001
py main.py 1 001

# Задание 1, тест 001, алгоритм BFS
py main.py 1 001 --algorithm bfs

# Задание 1, все тесты, только списки смежности
py main.py 1 -i a

# Задание 1, тест 001, список рёбер, с выводом результата
py main.py 1 001 -i e -s

# Задание 2, тест 001
py main.py 2 001
```

## Реализованные задания

### Задание 1: Поиск компонент связности

**Алгоритмы:** DFS/BFS для поиска компонент связности графа и слабой связности в орграфе.

**Входные данные:**
- Граф, заданный списком рёбер
- Граф, заданный списками смежности  
- Граф, заданный матрицей смежности

**Выходные данные:**
- Информация о связности графа/орграфа
- Список компонент связности

**Пример вывода:**
```
Graph is not connected

Connected components:
[1, 2, 3, 5]
[4, 6]
```

Для орграфов:
```
Diraph is not connected

Connected components:
[2]
[1, 3, 4, 5, 6]
```

## Форматы входных файлов

### Матрица смежности
```
6
0 1 0 0 1 0 
1 0 1 0 0 0 
0 1 0 0 0 0 
0 0 0 0 0 1 
1 0 0 0 0 0 
0 0 0 1 0 0 
```

### Списки смежности
```
6
2 5 
1 3 
2 
6 
1 
4 
```

### Список рёбер
```
6
1 2
1 5
2 1
2 3
3 2
4 6
5 1
6 4
```

## Особенности реализации

- **Итеративный DFS** - используется для избежания переполнения стека на больших графах
- **Автоматическое увеличение лимита рекурсии** - для графов с более чем 1000 вершинами
- **Поддержка альтернативных имён файлов** - программа автоматически находит файлы с разными вариантами имён
- **Корректная обработка орграфов** - отдельная логика для слабо связных компонент

## Требования

- Python 3.7+
- Стандартные библиотеки Python (typing, collections, sys, os, argparse)

## Разработка

Для добавления нового задания:

1. Создайте файл `tasks/taskN.py`
2. Реализуйте функцию `solve_task(graph: Graph, **kwargs) -> str`
3. Добавьте тестовые данные в `graph-tests/taskN/`

Функция `solve_task` должна принимать объект `Graph` и возвращать строку с результатом в требуемом формате. 